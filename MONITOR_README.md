# 开盘监控系统使用说明

## 📊 关于进度条

运行 `monitor_open_market.py` 时，你可能会看到类似这样的进度条：

```
34%|████████████████████████████▎ | 20/58
```

**这是正常的！** 这是 `akshare` 库在获取实时行情数据时自动显示的进度条。

### 为什么会有进度条？

- `akshare` 需要从网络获取所有A股股票的实时数据
- 数据量较大（5000+只股票），所以需要一些时间
- 进度条显示获取进度，通常需要30-60秒

### 如何等待？

1. **耐心等待**：让程序完成数据获取（通常1-2分钟）
2. **不要中断**：按 `Ctrl+C` 会中断程序
3. **观察输出**：程序完成后会显示监控面板

## 🚀 快速使用

### 1. 盘后选股（T日收盘后）

```bash
python main_realtime.py
```

这会生成 `results/recommended_stocks_*.csv` 文件。

### 2. 次日开盘监控（T+1日 9:30-9:45）

```bash
# 正常时间运行
python monitor_open_market.py

# 超过9:45也可以运行（测试用）
python monitor_open_market.py --force
```

### 3. 查看结果

监控完成后，结果保存在：
- `monitor_results/trading_instructions_*.json` - 完整指令（JSON格式）
- `monitor_results/all_instructions_*.csv` - 所有指令（CSV格式，便于查看）

## ⚙️ 参数说明

```bash
python monitor_open_market.py --help
```

**常用参数**：
- `--force`: 超过9:45也继续运行（不交互）
- `--max-monitor 20`: 最多监控20只股票（默认20）
- `--interval 30`: 刷新间隔30秒（默认30秒）

## 📋 监控信号说明

系统会监控以下5个关键信号：

1. **价格上涨** - 当前价格高于昨日收盘
2. **放量明显** - 成交量比昨日同时段放大
3. **分时逐级抬升** - 分时图价格逐步上涨
4. **价格在均线上方** - 价格在分时均线上方
5. **走势稳定** - 价格波动较小

**决策规则**：
- **≥2个信号** → ✅ 考虑买入
- **1个信号** → ⏳ 观察等待
- **0个信号** → ❌ 放弃

## ⏱️ 监控时间线

```
9:30 开盘
  ↓
9:30-9:45 实时监控（15分钟）
  ↓
9:45 生成交易指令
  ↓
显示买入/等待/放弃建议
```

## 🔧 故障排除

### 问题1：进度条卡住不动

**可能原因**：
- 网络连接问题
- akshare API限流

**解决方案**：
1. 等待更长时间（最多3-5分钟）
2. 检查网络连接
3. 如果一直卡住，按 `Ctrl+C` 中断，稍后重试

### 问题2：找不到盘前分析文件

**解决方案**：
1. 确保先运行了 `main_realtime.py`
2. 检查 `results/` 目录下是否有CSV文件
3. 确保文件格式正确

### 问题3：监控股票数量为0

**可能原因**：
- 盘前分析文件为空
- 股票代码格式不正确

**解决方案**：
1. 检查盘前分析文件内容
2. 确保股票代码格式为 `000001.SZ` 或 `600519.SS`

## 💡 最佳实践

1. **提前准备**：前一天收盘后运行选股系统
2. **准时监控**：9:30准时开始监控，获得最佳信号
3. **耐心等待**：数据获取需要时间，不要着急
4. **保存结果**：监控结果会自动保存，可以后续查看
5. **结合判断**：监控结果仅供参考，还需结合市场整体情况

## 📞 技术支持

如有问题，请检查：
1. Python版本（需要3.8+）
2. 依赖库是否安装完整（`pip install -r requirements.txt`）
3. 网络连接是否正常
4. akshare库是否正常工作

---

**提示**：开盘监控系统是辅助工具，最终交易决策请结合市场实际情况和个人判断。
