# 全时段市场分析系统使用指南

## 📋 系统概述

全时段市场分析系统可以根据当前时间自动选择分析模式，支持以下时间段：

| 时间段 | 时间范围 | 分析重点 | 运行方式 |
|--------|---------|---------|---------|
| **开盘** | 9:30-10:00 | 开盘强势股识别、资金流向 | `python analyze_anytime.py` |
| **上午盘中** | 10:00-11:30 | 趋势确认、回调机会 | 自动检测 |
| **午间休市** | 11:30-13:00 | 上午总结、下午预判 | 自动检测 |
| **下午开盘** | 13:00-14:00 | 下午走势、延续性 | 自动检测 |
| **下午盘中** | 14:00-14:30 | 全天趋势、尾盘机会 | 自动检测 |
| **尾盘** | 14:30-15:00 | 尾盘异动、次日预判 | 自动检测 |
| **盘后** | 15:00后 | 全天复盘、技术分析 | 自动检测 |
| **盘前** | 21:00-9:30 | 隔夜消息、技术形态 | 自动检测 |
| **周末** | 周六/周日 | 周线分析、下周策略 | 自动检测 |

## 🚀 快速使用

### 方法1：自动检测时间（推荐）

```bash
python analyze_anytime.py
```

系统会自动：
1. 检测当前时间
2. 选择对应的分析模式
3. 加载监控列表
4. 执行分析
5. 显示报告并保存结果

### 方法2：使用快捷脚本

```bash
# 自动检测
python run_analysis.py --mode auto

# 指定模式
python run_analysis.py --mode noon      # 午间分析
python run_analysis.py --mode post      # 盘后分析
python run_analysis.py --mode weekend    # 周末分析
```

## 📊 各时间段分析内容

### 1. 开盘30分钟 (9:30-10:00)

**分析重点**：
- 开盘强势股识别
- 资金流向判断
- 板块轮动情况

**输出内容**：
- 开盘强势股票列表
- 买入建议
- 操作时机

**使用场景**：
- 确认盘前选股是否延续强势
- 寻找开盘后的买入机会

### 2. 上午盘中 (10:00-11:30)

**分析重点**：
- 上午趋势确认
- 回调机会识别
- 量能变化

**输出内容**：
- 趋势延续性分析
- 回调买入机会
- 加仓建议

**使用场景**：
- 判断上午趋势是否健康
- 寻找更好的买入价格

### 3. 午间休市 (11:30-13:00)

**分析重点**：
- 上午表现总结
- 下午走势预判
- 消息面影响

**输出内容**：
- 上午涨跌统计
- 下午走势预测
- 操作策略建议

**使用场景**：
- 复盘上午操作
- 制定下午交易计划

### 4. 下午开盘 (13:00-14:00)

**分析重点**：
- 下午开盘走势
- 上午强势股延续性
- 量能对比

**输出内容**：
- 下午开盘强势股
- 延续性判断
- 操作建议

**使用场景**：
- 判断上午强势是否延续
- 寻找下午买入机会

### 5. 下午盘中 (14:00-14:30)

**分析重点**：
- 全天趋势确认
- 尾盘机会识别
- 风险控制

**输出内容**：
- 全天趋势分析
- 尾盘操作建议
- 仓位管理建议

**使用场景**：
- 确认全天趋势
- 准备尾盘操作

### 6. 尾盘 (14:30-15:00)

**分析重点**：
- 尾盘异动识别
- 次日走势预判
- 持仓调整建议

**输出内容**：
- 尾盘异动股票
- 次日预判
- 持仓建议

**使用场景**：
- 尾盘操作决策
- 准备盘后复盘

### 7. 盘后分析 (15:00后)

**分析重点**：
- 全天复盘
- 技术指标分析
- 次日策略制定

**输出内容**：
- 全天表现汇总
- 技术面分析
- 明日走势预测
- 关注股票列表

**使用场景**：
- 复盘全天交易
- 制定次日策略
- 技术面分析

### 8. 盘前预判 (21:00-9:30)

**分析重点**：
- 隔夜消息影响
- 技术形态分析
- 当日策略制定

**输出内容**：
- 技术形态分析
- 开盘预测
- 观察清单

**使用场景**：
- 制定开盘策略
- 设置观察清单

### 9. 周末分析 (周六/周日)

**分析重点**：
- 周线趋势分析
- 技术形态识别
- 下周策略制定

**输出内容**：
- 周线分析结果
- 下周走势预测
- 重点板块推荐

**使用场景**：
- 周末复盘
- 制定下周策略

## 💡 使用示例

### 示例1：中午运行（分析上午，预判下午）

```bash
# 在11:45运行
python analyze_anytime.py
```

**输出示例**：
```
📈 午间休市分析
================================================================================
分析时间: 11:45
分析模式: noon_break
分析重点: 上午总结、下午走势预判

🎯 操作建议: 上午普涨，下午有望延续，可寻找机会

🌅 上午表现汇总:
  1. 云南铜业     评分: 78.5  趋势: up
  2. 宝武镁业     评分: 68.2  趋势: up
  ...

🌅 下午走势预测: 看涨 (置信度: 70%)

💡 具体操作建议:
  1. 复盘上午操作
  2. 制定下午交易计划
  3. 关注午间消息面
```

### 示例2：收盘后运行（全天复盘）

```bash
# 在15:30运行
python analyze_anytime.py
```

**输出示例**：
```
📈 盘后复盘分析
================================================================================
分析时间: 15:30
分析模式: post_market
分析重点: 全天复盘、技术指标分析、次日策略

🎯 操作建议: 市场表现良好，8只股票技术面向好，可关注

📋 股票分析汇总:
  1. 云南铜业     评分: 78.5  趋势: up
  2. 宝武镁业     评分: 68.2  趋势: up
  ...

📅 明日走势预测: 看涨 (置信度: 65%)

💡 具体操作建议:
  1. 复盘全天交易
  2. 分析技术指标
  3. 制定次日策略
```

### 示例3：周末运行（周线分析）

```bash
# 在周六运行
python analyze_anytime.py
```

**输出示例**：
```
📈 周末分析
================================================================================
分析时间: 10:00
分析模式: weekend_analysis
分析重点: 周线分析、技术形态、下周策略

📅 周线分析:
  1. 云南铜业     评分: 75.0  形态: 上升趋势
  2. 宝武镁业     评分: 68.0  形态: 上升趋势
  ...

🗓️  下周走势预测: 看涨 (置信度: 65%)

💡 具体操作建议:
  1. 分析周线趋势
  2. 关注周末政策
  3. 制定下周策略
```

## 📁 输出文件

分析结果保存在 `analysis_results/` 目录：

1. **JSON格式**：`{mode}_analysis_YYYYMMDD_HHMM.json`
   - 完整的分析结果（包含所有字段）

2. **CSV格式**：`{mode}_stocks_YYYYMMDD_HHMM.csv`
   - 股票数据表格（便于查看和筛选）

## ⚙️ 配置说明

### 监控列表来源

系统按以下优先级加载监控列表：

1. **优先**：`results/recommended_stocks_*.csv`（最新）
2. **备选**：`results/stocks_simple_*.csv`
3. **备选**：`results/simple_recommendations_*.csv`
4. **最后**：实时获取板块数据

### 分析股票数量

- 默认最多分析 **25只股票**
- 可在代码中调整 `max_stocks_to_analyze`

## 🔄 完整工作流程

### 交易日流程

```
T日收盘后 (15:30):
  → python main_realtime.py          # 选股
  
T+1日:
  8:45  → python analyze_anytime.py   # 盘前预判
  9:35  → python analyze_anytime.py   # 开盘分析
  10:30 → python analyze_anytime.py   # 上午盘中
  11:45 → python analyze_anytime.py   # 午间分析
  13:15 → python analyze_anytime.py   # 下午开盘
  14:15 → python analyze_anytime.py   # 下午盘中
  14:45 → python analyze_anytime.py   # 尾盘分析
  15:15 → python analyze_anytime.py   # 盘后复盘
```

### 周末流程

```
周六 10:00:
  → python analyze_anytime.py         # 周末分析
```

## 🎯 与开盘监控的区别

| 功能 | 开盘监控 | 全时段分析 |
|------|---------|-----------|
| **运行时间** | 9:30-9:45 | 任何时间 |
| **数据来源** | 实时行情 | 历史K线+实时 |
| **分析重点** | 开盘信号 | 趋势分析 |
| **输出内容** | 买入指令 | 趋势报告 |
| **适用场景** | 当日买入决策 | 趋势判断和策略制定 |

## 💡 最佳实践

1. **盘后复盘**：收盘后运行，了解全天表现
2. **午间分析**：中午运行，预判下午走势
3. **周末分析**：周末运行，制定下周策略
4. **盘前预判**：开盘前运行，制定当日策略

## ⚠️ 注意事项

1. **数据延迟**：非交易时间运行，数据可能不是最新的
2. **网络要求**：需要网络连接获取数据
3. **API限制**：注意 akshare API 调用频率
4. **仅供参考**：分析结果仅供参考，不构成投资建议

## 🔧 故障排除

### 问题1：找不到监控列表

**解决方案**：
1. 先运行 `python main_realtime.py` 生成推荐股票
2. 或手动指定股票代码

### 问题2：分析结果为空

**可能原因**：
- 监控列表为空
- 数据获取失败

**解决方案**：
1. 检查 `results/` 目录是否有文件
2. 检查网络连接
3. 查看日志错误信息

---

**提示**：全时段分析系统是辅助工具，最终交易决策请结合市场实际情况和个人判断。
